(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{755:function(t,s,e){"use strict";e.r(s);var r=e(10),a=Object(r.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"let-s-encrypt-错误提示"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#let-s-encrypt-错误提示"}},[t._v("#")]),t._v(" Let's Encrypt 错误提示")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("div",{staticClass:"custom-style-wrapper window-controls"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"54",height:"14",viewBox:"0 0 54 14"}},[e("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)"}},[e("circle",{attrs:{cx:"6",cy:"6",r:"6",fill:"#FF5F56",stroke:"#E0443E","stroke-width":".5"}}),e("circle",{attrs:{cx:"26",cy:"6",r:"6",fill:"#FFBD2E",stroke:"#DEA123","stroke-width":".5"}}),e("circle",{attrs:{cx:"46",cy:"6",r:"6",fill:"#27C93F",stroke:"#1AAB29","stroke-width":".5"}})])])]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("certbot renew\ncertbot.errors.CertStorageError: expected /etc/letsencrypt/live/xxx.com/cert.pem to be a symlink\nRenewal configuration file /etc/letsencrypt/renewal/xxx.com.conf is broken. Skipping.\n\n\ncertbot update_symlinks\nSaving debug log to /var/log/letsencrypt/letsencrypt.log\nExpected /etc/letsencrypt/live/xxx.com/cert.pem to be a symlink\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")]),e("CodeResult",{attrs:{lang:"",code:"certbot%20renew%0Acertbot.errors.CertStorageError%3A%20expected%20%2Fetc%2Fletsencrypt%2Flive%2Fxxx.com%2Fcert.pem%20to%20be%20a%20symlink%0ARenewal%20configuration%20file%20%2Fetc%2Fletsencrypt%2Frenewal%2Fxxx.com.conf%20is%20broken.%20Skipping.%0A%0A%0Acertbot%20update_symlinks%0ASaving%20debug%20log%20to%20%2Fvar%2Flog%2Fletsencrypt%2Fletsencrypt.log%0AExpected%20%2Fetc%2Fletsencrypt%2Flive%2Fxxx.com%2Fcert.pem%20to%20be%20a%20symlink"}})],1),e("h2",{attrs:{id:"问题关键"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#问题关键"}},[t._v("#")]),t._v(" 问题关键")]),t._v(" "),e("p",[t._v("问题的关键是：")]),t._v(" "),e("p",[e("code",[t._v("/etc/letsencrypt/live/xxx.com/cert.pem")]),t._v(" 等文件不是软连接了，造成写入失败。")]),t._v(" "),e("h2",{attrs:{id:"解决办法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解决办法"}},[t._v("#")]),t._v(" 解决办法")]),t._v(" "),e("blockquote",[e("p",[t._v("请将以下的xxx.com修改为你的域名")])]),t._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("div",{staticClass:"custom-style-wrapper window-controls"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"54",height:"14",viewBox:"0 0 54 14"}},[e("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)"}},[e("circle",{attrs:{cx:"6",cy:"6",r:"6",fill:"#FF5F56",stroke:"#E0443E","stroke-width":".5"}}),e("circle",{attrs:{cx:"26",cy:"6",r:"6",fill:"#FFBD2E",stroke:"#DEA123","stroke-width":".5"}}),e("circle",{attrs:{cx:"46",cy:"6",r:"6",fill:"#27C93F",stroke:"#1AAB29","stroke-width":".5"}})])])]),e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /etc/letsencrypt/\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" -R 0755 live/\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" -R 0755 renewal/\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" -R 0755 archive/\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" live/xxx.com/\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" ./*.*\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" -s "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/archive/xxx.com/cert1.pem "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" -s "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/archive/xxx.com/chain1.pem "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" -s "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/archive/xxx.com/fullchain1.pem "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" -s "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/archive/xxx.com/privkey1.pem "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" cert1.pem cert.pem\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" chain1.pem chain.pem\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" fullchain1.pem fullchain.pem\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" privkey1.pem privkey.pem\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /etc/letsencrypt/\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br")]),e("CodeResult",{attrs:{lang:"shell",code:"cd%20%2Fetc%2Fletsencrypt%2F%0Achmod%20-R%200755%20live%2F%0Achmod%20-R%200755%20renewal%2F%0Achmod%20-R%200755%20archive%2F%0Acd%20live%2Fxxx.com%2F%0Arm%20.%2F*.*%0Aln%20-s%20..%2F..%2Farchive%2Fxxx.com%2Fcert1.pem%20.%0Aln%20-s%20..%2F..%2Farchive%2Fxxx.com%2Fchain1.pem%20.%0Aln%20-s%20..%2F..%2Farchive%2Fxxx.com%2Ffullchain1.pem%20.%0Aln%20-s%20..%2F..%2Farchive%2Fxxx.com%2Fprivkey1.pem%20.%0Amv%20cert1.pem%20cert.pem%0Amv%20chain1.pem%20chain.pem%0Amv%20fullchain1.pem%20fullchain.pem%0Amv%20privkey1.pem%20privkey.pem%0Acd%20%2Fetc%2Fletsencrypt%2F"}})],1),e("p",[t._v("然后就可以certbot renew了，建议先 "),e("code",[t._v("certbot update_symlinks")])]),t._v(" "),e("p",[t._v("来看一下正确的子文件列表：(软连接指向的文件为最新的文件，如cert9.pem)")]),t._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("div",{staticClass:"custom-style-wrapper window-controls"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"54",height:"14",viewBox:"0 0 54 14"}},[e("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)"}},[e("circle",{attrs:{cx:"6",cy:"6",r:"6",fill:"#FF5F56",stroke:"#E0443E","stroke-width":".5"}}),e("circle",{attrs:{cx:"26",cy:"6",r:"6",fill:"#FFBD2E",stroke:"#DEA123","stroke-width":".5"}}),e("circle",{attrs:{cx:"46",cy:"6",r:"6",fill:"#27C93F",stroke:"#1AAB29","stroke-width":".5"}})])])]),e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("\nroot@vps:/etc/letsencrypt/live/xxx.com"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ls -al")]),t._v("\ndrwxr-xr-x   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" root root  "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" May "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":25 ./\ndrwxr-xr-x "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("354")]),t._v(" root root "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("20480")]),t._v(" May "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":00 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/\nlrwxrwxrwx   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root    "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("37")]),t._v(" May "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":25 cert.pem -"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/archive/xxx.com/cert9.pem\nlrwxrwxrwx   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root    "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("38")]),t._v(" May "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":25 chain.pem -"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/archive/xxx.com/chain9.pem\nlrwxrwxrwx   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root    "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("42")]),t._v(" May "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":25 fullchain.pem -"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/archive/xxx.com/fullchain9.pem\nlrwxrwxrwx   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root    "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("40")]),t._v(" May "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":25 privkey.pem -"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/archive/xxx.com/privkey9.pem\n-rw-r--r--   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("543")]),t._v(" Mar  "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":43 README\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br")]),e("CodeResult",{attrs:{lang:"shell",code:"root%40vps%3A%2Fetc%2Fletsencrypt%2Flive%2Fxxx.com%23%20ls%20-al%0Adrwxr-xr-x%20%20%202%20root%20root%20%204096%20May%2013%2010%3A25%20.%2F%0Adrwxr-xr-x%20354%20root%20root%2020480%20May%2013%2010%3A00%20..%2F%0Alrwxrwxrwx%20%20%201%20root%20root%20%20%20%2037%20May%2013%2010%3A25%20cert.pem%20-%3E%20..%2F..%2Farchive%2Fxxx.com%2Fcert9.pem%0Alrwxrwxrwx%20%20%201%20root%20root%20%20%20%2038%20May%2013%2010%3A25%20chain.pem%20-%3E%20..%2F..%2Farchive%2Fxxx.com%2Fchain9.pem%0Alrwxrwxrwx%20%20%201%20root%20root%20%20%20%2042%20May%2013%2010%3A25%20fullchain.pem%20-%3E%20..%2F..%2Farchive%2Fxxx.com%2Ffullchain9.pem%0Alrwxrwxrwx%20%20%201%20root%20root%20%20%20%2040%20May%2013%2010%3A25%20privkey.pem%20-%3E%20..%2F..%2Farchive%2Fxxx.com%2Fprivkey9.pem%0A-rw-r--r--%20%20%201%20root%20root%20%20%20543%20Mar%20%206%2010%3A43%20README"}})],1)])}),[],!1,null,null,null);s.default=a.exports}}]);