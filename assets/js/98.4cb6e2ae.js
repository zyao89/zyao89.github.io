(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{776:function(s,t,e){"use strict";e.r(t);var r=e(10),n=Object(r.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"背景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" 背景")]),s._v(" "),e("p",[s._v("查询pod状态")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("div",{staticClass:"custom-style-wrapper window-controls"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"54",height:"14",viewBox:"0 0 54 14"}},[e("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)"}},[e("circle",{attrs:{cx:"6",cy:"6",r:"6",fill:"#FF5F56",stroke:"#E0443E","stroke-width":".5"}}),e("circle",{attrs:{cx:"26",cy:"6",r:"6",fill:"#FFBD2E",stroke:"#DEA123","stroke-width":".5"}}),e("circle",{attrs:{cx:"46",cy:"6",r:"6",fill:"#27C93F",stroke:"#1AAB29","stroke-width":".5"}})])])]),e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("kubectl -n kube-system get pods "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" coredns "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" Evicted\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")]),e("CodeResult",{attrs:{lang:"sh",code:"kubectl%20-n%20kube-system%20get%20pods%20%7C%20grep%20coredns%20%7C%20grep%20Evicted"}})],1),e("p",[s._v("查询结果为：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("div",{staticClass:"custom-style-wrapper window-controls"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"54",height:"14",viewBox:"0 0 54 14"}},[e("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)"}},[e("circle",{attrs:{cx:"6",cy:"6",r:"6",fill:"#FF5F56",stroke:"#E0443E","stroke-width":".5"}}),e("circle",{attrs:{cx:"26",cy:"6",r:"6",fill:"#FFBD2E",stroke:"#DEA123","stroke-width":".5"}}),e("circle",{attrs:{cx:"46",cy:"6",r:"6",fill:"#27C93F",stroke:"#1AAB29","stroke-width":".5"}})])])]),e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("coredns-67cb7b5f46-2crxg                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Evicted   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          4h56m\ncoredns-67cb7b5f46-2ds7n                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Evicted   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          4h56m\ncoredns-67cb7b5f46-2pzw5                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Evicted   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          4h56m\ncoredns-67cb7b5f46-4f8nm                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Evicted   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          166m\ncoredns-67cb7b5f46-4gncz                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Evicted   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          10h\ncoredns-67cb7b5f46-4lnw2                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Evicted   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          166m\ncoredns-67cb7b5f46-4smp6                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Evicted   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          166m\ncoredns-67cb7b5f46-5hx49                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Evicted   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          166m\ncoredns-67cb7b5f46-6jxqn                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Evicted   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          166m\ncoredns-67cb7b5f46-6qh9z                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Evicted   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          166m\ncoredns-67cb7b5f46-6rn4c                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Evicted   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          10h\ncoredns-67cb7b5f46-7jsth                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Evicted   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          10h\ncoredns-67cb7b5f46-7mzvb                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Evicted   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          166m\ncoredns-67cb7b5f46-92t2k                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Evicted   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          4h56m\ncoredns-67cb7b5f46-9jqdm                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Evicted   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          10h\ncoredns-67cb7b5f46-9rxsc                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Evicted   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          4h56m\ncoredns-67cb7b5f46-9xmkk                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Evicted   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          166m\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")]),e("CodeResult",{attrs:{lang:"sh",code:"coredns-67cb7b5f46-2crxg%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2F1%20%20%20%20%20Evicted%20%20%200%20%20%20%20%20%20%20%20%20%204h56m%0Acoredns-67cb7b5f46-2ds7n%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2F1%20%20%20%20%20Evicted%20%20%200%20%20%20%20%20%20%20%20%20%204h56m%0Acoredns-67cb7b5f46-2pzw5%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2F1%20%20%20%20%20Evicted%20%20%200%20%20%20%20%20%20%20%20%20%204h56m%0Acoredns-67cb7b5f46-4f8nm%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2F1%20%20%20%20%20Evicted%20%20%200%20%20%20%20%20%20%20%20%20%20166m%0Acoredns-67cb7b5f46-4gncz%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2F1%20%20%20%20%20Evicted%20%20%200%20%20%20%20%20%20%20%20%20%2010h%0Acoredns-67cb7b5f46-4lnw2%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2F1%20%20%20%20%20Evicted%20%20%200%20%20%20%20%20%20%20%20%20%20166m%0Acoredns-67cb7b5f46-4smp6%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2F1%20%20%20%20%20Evicted%20%20%200%20%20%20%20%20%20%20%20%20%20166m%0Acoredns-67cb7b5f46-5hx49%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2F1%20%20%20%20%20Evicted%20%20%200%20%20%20%20%20%20%20%20%20%20166m%0Acoredns-67cb7b5f46-6jxqn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2F1%20%20%20%20%20Evicted%20%20%200%20%20%20%20%20%20%20%20%20%20166m%0Acoredns-67cb7b5f46-6qh9z%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2F1%20%20%20%20%20Evicted%20%20%200%20%20%20%20%20%20%20%20%20%20166m%0Acoredns-67cb7b5f46-6rn4c%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2F1%20%20%20%20%20Evicted%20%20%200%20%20%20%20%20%20%20%20%20%2010h%0Acoredns-67cb7b5f46-7jsth%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2F1%20%20%20%20%20Evicted%20%20%200%20%20%20%20%20%20%20%20%20%2010h%0Acoredns-67cb7b5f46-7mzvb%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2F1%20%20%20%20%20Evicted%20%20%200%20%20%20%20%20%20%20%20%20%20166m%0Acoredns-67cb7b5f46-92t2k%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2F1%20%20%20%20%20Evicted%20%20%200%20%20%20%20%20%20%20%20%20%204h56m%0Acoredns-67cb7b5f46-9jqdm%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2F1%20%20%20%20%20Evicted%20%20%200%20%20%20%20%20%20%20%20%20%2010h%0Acoredns-67cb7b5f46-9rxsc%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2F1%20%20%20%20%20Evicted%20%20%200%20%20%20%20%20%20%20%20%20%204h56m%0Acoredns-67cb7b5f46-9xmkk%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2F1%20%20%20%20%20Evicted%20%20%200%20%20%20%20%20%20%20%20%20%20166m"}})],1),e("p",[s._v("发现有很多 "),e("code",[s._v("Evicted")]),s._v(" 状态的pod")]),s._v(" "),e("p",[e("strong",[s._v("问题原因")]),s._v("：这是由于node节点的磁盘或内存资源不够后将现有的pod进行了驱赶。")]),s._v(" "),e("h2",{attrs:{id:"解决"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解决"}},[s._v("#")]),s._v(" 解决")]),s._v(" "),e("p",[s._v("批量删除所有 "),e("code",[s._v("Evicted")]),s._v(" 状态的pod即可")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("div",{staticClass:"custom-style-wrapper window-controls"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"54",height:"14",viewBox:"0 0 54 14"}},[e("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)"}},[e("circle",{attrs:{cx:"6",cy:"6",r:"6",fill:"#FF5F56",stroke:"#E0443E","stroke-width":".5"}}),e("circle",{attrs:{cx:"26",cy:"6",r:"6",fill:"#FFBD2E",stroke:"#DEA123","stroke-width":".5"}}),e("circle",{attrs:{cx:"46",cy:"6",r:"6",fill:"#27C93F",stroke:"#1AAB29","stroke-width":".5"}})])])]),e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("kubectl -n kube-system  get pods "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" coredns "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" Evicted "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print$1}'")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),s._v(" kubectl -n kube-system delete pods\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")]),e("CodeResult",{attrs:{lang:"sh",code:"kubectl%20-n%20kube-system%20%20get%20pods%20%7C%20grep%20coredns%20%7C%20grep%20Evicted%20%7C%20awk%20'%7Bprint%241%7D'%7C%20xargs%20kubectl%20-n%20kube-system%20delete%20pods"}})],1),e("p",[s._v("可自定义替换 "),e("code",[s._v("namespace")]),s._v("、"),e("code",[s._v("podName")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("div",{staticClass:"custom-style-wrapper window-controls"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"54",height:"14",viewBox:"0 0 54 14"}},[e("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)"}},[e("circle",{attrs:{cx:"6",cy:"6",r:"6",fill:"#FF5F56",stroke:"#E0443E","stroke-width":".5"}}),e("circle",{attrs:{cx:"26",cy:"6",r:"6",fill:"#FFBD2E",stroke:"#DEA123","stroke-width":".5"}}),e("circle",{attrs:{cx:"46",cy:"6",r:"6",fill:"#27C93F",stroke:"#1AAB29","stroke-width":".5"}})])])]),e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("kubectl -n "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${namespace}")]),s._v("  get pods "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${podName}")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" Evicted "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print$1}'")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),s._v(" kubectl -n "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${namespace}")]),s._v(" delete pods\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")]),e("CodeResult",{attrs:{lang:"sh",code:"kubectl%20-n%20%24%7Bnamespace%7D%20%20get%20pods%20%7C%20grep%20%24%7BpodName%7D%20%7C%20grep%20Evicted%20%7C%20awk%20'%7Bprint%241%7D'%7C%20xargs%20kubectl%20-n%20%24%7Bnamespace%7D%20delete%20pods"}})],1),e("div",{staticClass:"language-sh line-numbers-mode"},[e("div",{staticClass:"custom-style-wrapper window-controls"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"54",height:"14",viewBox:"0 0 54 14"}},[e("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)"}},[e("circle",{attrs:{cx:"6",cy:"6",r:"6",fill:"#FF5F56",stroke:"#E0443E","stroke-width":".5"}}),e("circle",{attrs:{cx:"26",cy:"6",r:"6",fill:"#FFBD2E",stroke:"#DEA123","stroke-width":".5"}}),e("circle",{attrs:{cx:"46",cy:"6",r:"6",fill:"#27C93F",stroke:"#1AAB29","stroke-width":".5"}})])])]),e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定pod所在的命名空间")]),s._v("\nkubectl -n kube-system get pods "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" coredns\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")]),e("CodeResult",{attrs:{lang:"sh",code:"%23%E6%8C%87%E5%AE%9Apod%E6%89%80%E5%9C%A8%E7%9A%84%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%0Akubectl%20-n%20kube-system%20get%20pods%20%7C%20grep%20coredns"}})],1),e("p",[s._v("执行完成后，成功删除全部 "),e("code",[s._v("Evicted")]),s._v(" 状态的Pods")])])}),[],!1,null,null,null);t.default=n.exports}}]);