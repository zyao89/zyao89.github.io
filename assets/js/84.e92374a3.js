(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{750:function(s,t,a){"use strict";a.r(t);var e=a(10),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"自定义标题栏"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义标题栏"}},[s._v("#")]),s._v(" 自定义标题栏")]),s._v(" "),a("p",[a("code",[s._v("frame: false")]),s._v(": 主进程中设置窗体参数。去掉默认的标题栏")]),s._v(" "),a("p",[a("code",[s._v("-webkit-app-region: drag")]),s._v(": 渲染进程中设置css。对应的组件可以进行拖动了")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("div",{staticClass:"custom-style-wrapper window-controls"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"54",height:"14",viewBox:"0 0 54 14"}},[a("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)"}},[a("circle",{attrs:{cx:"6",cy:"6",r:"6",fill:"#FF5F56",stroke:"#E0443E","stroke-width":".5"}}),a("circle",{attrs:{cx:"26",cy:"6",r:"6",fill:"#FFBD2E",stroke:"#DEA123","stroke-width":".5"}}),a("circle",{attrs:{cx:"46",cy:"6",r:"6",fill:"#27C93F",stroke:"#1AAB29","stroke-width":".5"}})])])]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("mainWindow "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BrowserWindow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    height"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("350")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    width"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("550")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    useContentSize"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    resizable"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" isDev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 是否可调整大小")]),s._v("\n    alwaysOnTop"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("isDev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 应用是否始终在所有顶层之上")]),s._v("\n    transparent"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 透明边框")]),s._v("\n    frame"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 不使用默认边框")]),s._v("\n    center"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")]),a("CodeResult",{attrs:{lang:"js",code:"mainWindow%20%3D%20new%20BrowserWindow(%7B%0A%20%20%20%20height%3A%20350%2C%0A%20%20%20%20width%3A%20550%2C%0A%20%20%20%20useContentSize%3A%20true%2C%0A%20%20%20%20resizable%3A%20isDev%2C%20%2F%2F%20%E6%98%AF%E5%90%A6%E5%8F%AF%E8%B0%83%E6%95%B4%E5%A4%A7%E5%B0%8F%0A%20%20%20%20alwaysOnTop%3A%20!isDev%2C%20%2F%2F%20%E5%BA%94%E7%94%A8%E6%98%AF%E5%90%A6%E5%A7%8B%E7%BB%88%E5%9C%A8%E6%89%80%E6%9C%89%E9%A1%B6%E5%B1%82%E4%B9%8B%E4%B8%8A%0A%20%20%20%20transparent%3A%20true%2C%20%2F%2F%20%E9%80%8F%E6%98%8E%E8%BE%B9%E6%A1%86%0A%20%20%20%20frame%3A%20false%2C%20%2F%2F%20%E4%B8%8D%E4%BD%BF%E7%94%A8%E9%BB%98%E8%AE%A4%E8%BE%B9%E6%A1%86%0A%20%20%20%20center%3A%20true%0A%7D)"}})],1),a("div",{staticClass:"language-css line-numbers-mode"},[a("div",{staticClass:"custom-style-wrapper window-controls"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"54",height:"14",viewBox:"0 0 54 14"}},[a("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)"}},[a("circle",{attrs:{cx:"6",cy:"6",r:"6",fill:"#FF5F56",stroke:"#E0443E","stroke-width":".5"}}),a("circle",{attrs:{cx:"26",cy:"6",r:"6",fill:"#FFBD2E",stroke:"#DEA123","stroke-width":".5"}}),a("circle",{attrs:{cx:"46",cy:"6",r:"6",fill:"#27C93F",stroke:"#1AAB29","stroke-width":".5"}})])])]),a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".u-header")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("-webkit-app-region")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" drag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* as window header */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")]),a("CodeResult",{attrs:{lang:"css",code:".u-header%20%7B%0A%20%20%20%20-webkit-app-region%3A%20drag%3B%20%2F*%20as%20window%20header%20*%2F%0A%7D"}})],1),a("h2",{attrs:{id:"标题栏按钮无效-only-windows"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#标题栏按钮无效-only-windows"}},[s._v("#")]),s._v(" 标题栏按钮无效 -- only windows")]),s._v(" "),a("p",[s._v("该bug只在windows平台上显示，mac上正常。在header组件中设置为drag，导致组件里的元素都无法点击。")]),s._v(" "),a("p",[s._v("解决方案：在需要点击的元素上添加no-drag。"),a("code",[s._v("-webkit-app-region: no-drag;")]),s._v(" 详细看此 "),a("a",{attrs:{href:"https://github.com/electron/electron/issues/1354",target:"_blank",rel:"noopener noreferrer"}},[s._v("issue"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"自定义标题栏无法实现css-hover-only-windows"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义标题栏无法实现css-hover-only-windows"}},[s._v("#")]),s._v(" 自定义标题栏无法实现css hover -- only windows")]),s._v(" "),a("p",[s._v("当设置了为drag时，在windows上会屏蔽所有的鼠标事件,所以hover不起作用。这是一个由操作系统导致的问题，故无法修复，相关"),a("a",{attrs:{href:"https://github.com/electron/electron/issues/13534",target:"_blank",rel:"noopener noreferrer"}},[s._v("issue"),a("OutboundLink")],1),s._v("。"),a("br"),s._v("\n解决方案：去掉 "),a("code",[s._v("-webkit-app-region: drag;")]),s._v(" 即可。")]),s._v(" "),a("blockquote",[a("p",[s._v("如果要同时保留可拖动并且hover上有变化，在windows暂时无法实现，需要对此进行取舍或改变交互设计。")])]),s._v(" "),a("h2",{attrs:{id:"打包后程序调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包后程序调试"}},[s._v("#")]),s._v(" 打包后程序调试")]),s._v(" "),a("p",[s._v("解决方案：通过注册快捷键，调开web的开发者模式。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("div",{staticClass:"custom-style-wrapper window-controls"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"54",height:"14",viewBox:"0 0 54 14"}},[a("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)"}},[a("circle",{attrs:{cx:"6",cy:"6",r:"6",fill:"#FF5F56",stroke:"#E0443E","stroke-width":".5"}}),a("circle",{attrs:{cx:"26",cy:"6",r:"6",fill:"#FFBD2E",stroke:"#DEA123","stroke-width":".5"}}),a("circle",{attrs:{cx:"46",cy:"6",r:"6",fill:"#27C93F",stroke:"#1AAB29","stroke-width":".5"}})])])]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("globalShortcut"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'CommandOrControl+Shift+L'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" focusWin "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" BrowserWindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getFocusedWindow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    focusWin "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" focusWin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("toggleDevTools")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")]),a("CodeResult",{attrs:{lang:"js",code:"globalShortcut.register('CommandOrControl%2BShift%2BL'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20let%20focusWin%20%3D%20BrowserWindow.getFocusedWindow()%0A%20%20%20%20focusWin%20%26%26%20focusWin.toggleDevTools()%0A%7D)"}})],1),a("h2",{attrs:{id:"文本不可选择"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文本不可选择"}},[s._v("#")]),s._v(" 文本不可选择")]),s._v(" "),a("p",[s._v("解决方案：使用css "),a("code",[s._v("-webkit-user-select: none;")])]),s._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("div",{staticClass:"custom-style-wrapper window-controls"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"54",height:"14",viewBox:"0 0 54 14"}},[a("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)"}},[a("circle",{attrs:{cx:"6",cy:"6",r:"6",fill:"#FF5F56",stroke:"#E0443E","stroke-width":".5"}}),a("circle",{attrs:{cx:"26",cy:"6",r:"6",fill:"#FFBD2E",stroke:"#DEA123","stroke-width":".5"}}),a("circle",{attrs:{cx:"46",cy:"6",r:"6",fill:"#27C93F",stroke:"#1AAB29","stroke-width":".5"}})])])]),a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[s._v("html")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("-webkit-tap-highlight-color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" transparent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("-webkit-text-size-adjust")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 100%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("height")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 100%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("-webkit-user-select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" none"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* disable user select text */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")]),a("CodeResult",{attrs:{lang:"css",code:"html%20%7B%0A%20%20%20%20-webkit-tap-highlight-color%3A%20transparent%3B%0A%20%20%20%20-webkit-text-size-adjust%3A%20100%25%3B%0A%20%20%20%20height%3A%20100%25%3B%0A%20%20%20%20-webkit-user-select%3A%20none%3B%20%2F*%20disable%20user%20select%20text%20*%2F%0A%7D"}})],1),a("h2",{attrs:{id:"打包参数设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包参数设置"}},[s._v("#")]),s._v(" 打包参数设置")]),s._v(" "),a("p",[s._v("electron-builder进行打包, 常用的设置:")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("div",{staticClass:"custom-style-wrapper window-controls"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"54",height:"14",viewBox:"0 0 54 14"}},[a("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)"}},[a("circle",{attrs:{cx:"6",cy:"6",r:"6",fill:"#FF5F56",stroke:"#E0443E","stroke-width":".5"}}),a("circle",{attrs:{cx:"26",cy:"6",r:"6",fill:"#FFBD2E",stroke:"#DEA123","stroke-width":".5"}}),a("circle",{attrs:{cx:"46",cy:"6",r:"6",fill:"#27C93F",stroke:"#1AAB29","stroke-width":".5"}})])])]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("scripts"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** 打包成windows系统 **/")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node .electron-vue/build.js && electron-builder --win"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** 打包成macos系统 **/")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build:mac"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node .electron-vue/build.js && electron-builder --mac"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** 最终可执行文件名称：${productName}-${version}.${ext} **/")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"productName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sight-electron-app"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"appId"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"netease.sight.controller"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** 压缩形式，默认normal;store打包最快，适合测试;maximum打包体积最小，适合生产模式 **/")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"compression"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"maximum"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** 是否将多个文件合并为tar风格的归档模式 **/")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"asar"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"directories"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"output"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build"')]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** 打包结果目标地址 **/")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"files"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist/electron/**/*"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** 需要打包的文件地址 **/")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** 不同平台设置 **/")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mac"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"icon"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build/icons/icon.icns"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"win"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"icon"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build/icons/icon.ico"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"linux"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"icon"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build/icons"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br")]),a("CodeResult",{attrs:{lang:"js",code:"scripts%3A%20%7B%0A%20%20%20%20%2F**%20%E6%89%93%E5%8C%85%E6%88%90windows%E7%B3%BB%E7%BB%9F%20**%2F%0A%20%20%20%20%22build%22%3A%20%22node%20.electron-vue%2Fbuild.js%20%26%26%20electron-builder%20--win%22%2C%0A%20%20%20%20%2F**%20%E6%89%93%E5%8C%85%E6%88%90macos%E7%B3%BB%E7%BB%9F%20**%2F%0A%20%20%20%20%22build%3Amac%22%3A%20%22node%20.electron-vue%2Fbuild.js%20%26%26%20electron-builder%20--mac%22%2C%0A%7D%2C%0A%22build%22%3A%20%7B%0A%20%20%20%20%2F**%20%E6%9C%80%E7%BB%88%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6%E5%90%8D%E7%A7%B0%EF%BC%9A%24%7BproductName%7D-%24%7Bversion%7D.%24%7Bext%7D%20**%2F%0A%20%20%20%20%22productName%22%3A%20%22sight-electron-app%22%2C%0A%20%20%20%20%22appId%22%3A%20%22netease.sight.controller%22%2C%0A%20%20%20%20%2F**%20%E5%8E%8B%E7%BC%A9%E5%BD%A2%E5%BC%8F%EF%BC%8C%E9%BB%98%E8%AE%A4normal%3Bstore%E6%89%93%E5%8C%85%E6%9C%80%E5%BF%AB%EF%BC%8C%E9%80%82%E5%90%88%E6%B5%8B%E8%AF%95%3Bmaximum%E6%89%93%E5%8C%85%E4%BD%93%E7%A7%AF%E6%9C%80%E5%B0%8F%EF%BC%8C%E9%80%82%E5%90%88%E7%94%9F%E4%BA%A7%E6%A8%A1%E5%BC%8F%20**%2F%0A%20%20%20%20%22compression%22%3A%20%22maximum%22%2C%0A%20%20%20%20%2F**%20%E6%98%AF%E5%90%A6%E5%B0%86%E5%A4%9A%E4%B8%AA%E6%96%87%E4%BB%B6%E5%90%88%E5%B9%B6%E4%B8%BAtar%E9%A3%8E%E6%A0%BC%E7%9A%84%E5%BD%92%E6%A1%A3%E6%A8%A1%E5%BC%8F%20**%2F%0A%20%20%20%20%22asar%22%3A%20true%2C%0A%20%20%20%20%22directories%22%3A%20%7B%0A%20%20%20%20%20%20%22output%22%3A%20%22build%22%20%20%2F**%20%E6%89%93%E5%8C%85%E7%BB%93%E6%9E%9C%E7%9B%AE%E6%A0%87%E5%9C%B0%E5%9D%80%20**%2F%0A%20%20%20%20%7D%2C%0A%20%20%20%20%22files%22%3A%20%5B%0A%20%20%20%20%20%20%22dist%2Felectron%2F**%2F*%22%20%2F**%20%E9%9C%80%E8%A6%81%E6%89%93%E5%8C%85%E7%9A%84%E6%96%87%E4%BB%B6%E5%9C%B0%E5%9D%80%20**%2F%0A%20%20%20%20%5D%2C%0A%20%20%20%20%2F**%20%E4%B8%8D%E5%90%8C%E5%B9%B3%E5%8F%B0%E8%AE%BE%E7%BD%AE%20**%2F%0A%20%20%20%20%22mac%22%3A%20%7B%0A%20%20%20%20%20%20%22icon%22%3A%20%22build%2Ficons%2Ficon.icns%22%0A%20%20%20%20%7D%2C%0A%20%20%20%20%22win%22%3A%20%7B%0A%20%20%20%20%20%20%22icon%22%3A%20%22build%2Ficons%2Ficon.ico%22%0A%20%20%20%20%7D%2C%0A%20%20%20%20%22linux%22%3A%20%7B%0A%20%20%20%20%20%20%22icon%22%3A%20%22build%2Ficons%22%0A%20%20%20%20%7D%0A%7D"}})],1),a("h2",{attrs:{id:"触摸板放大缩小-only-mac"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#触摸板放大缩小-only-mac"}},[s._v("#")]),s._v(" 触摸板放大缩小 -- only mac")]),s._v(" "),a("p",[s._v("在macOS系统中，触摸板的放大缩小手指指令，会导致electron程序内的webFrame内容也跟着放大缩小。")]),s._v(" "),a("p",[s._v("解决方案：在renderer进程中设置其缩放范围")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("div",{staticClass:"custom-style-wrapper window-controls"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"54",height:"14",viewBox:"0 0 54 14"}},[a("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)"}},[a("circle",{attrs:{cx:"6",cy:"6",r:"6",fill:"#FF5F56",stroke:"#E0443E","stroke-width":".5"}}),a("circle",{attrs:{cx:"26",cy:"6",r:"6",fill:"#FFBD2E",stroke:"#DEA123","stroke-width":".5"}}),a("circle",{attrs:{cx:"46",cy:"6",r:"6",fill:"#27C93F",stroke:"#1AAB29","stroke-width":".5"}})])])]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'electron'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("webFrame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setZoomLevelLimits")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")]),a("CodeResult",{attrs:{lang:"js",code:"require('electron').webFrame.setZoomLevelLimits(1%2C%201)%3B"}})],1),a("h2",{attrs:{id:"web端唤起本地客户端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#web端唤起本地客户端"}},[s._v("#")]),s._v(" web端唤起本地客户端")]),s._v(" "),a("p",[s._v("electron提供该API能力：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("div",{staticClass:"custom-style-wrapper window-controls"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"54",height:"14",viewBox:"0 0 54 14"}},[a("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)"}},[a("circle",{attrs:{cx:"6",cy:"6",r:"6",fill:"#FF5F56",stroke:"#E0443E","stroke-width":".5"}}),a("circle",{attrs:{cx:"26",cy:"6",r:"6",fill:"#FFBD2E",stroke:"#DEA123","stroke-width":".5"}}),a("circle",{attrs:{cx:"46",cy:"6",r:"6",fill:"#27C93F",stroke:"#1AAB29","stroke-width":".5"}})])])]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setAsDefaultProtocolClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("protocol"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")]),a("CodeResult",{attrs:{lang:"js",code:"app.setAsDefaultProtocolClient(protocol%5B%2C%20path%2C%20args%5D)%3B"}})],1),a("h2",{attrs:{id:"禁止多开窗口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#禁止多开窗口"}},[s._v("#")]),s._v(" 禁止多开窗口")]),s._v(" "),a("p",[s._v("多次双击window 的exe文件，会开启多个窗口；mac下默认开1个，但通过命令还是可以多开。")]),s._v(" "),a("p",[s._v("解决方案：判断单实例："),a("code",[s._v("app.makeSingleInstance(callback)")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("div",{staticClass:"custom-style-wrapper window-controls"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"54",height:"14",viewBox:"0 0 54 14"}},[a("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)"}},[a("circle",{attrs:{cx:"6",cy:"6",r:"6",fill:"#FF5F56",stroke:"#E0443E","stroke-width":".5"}}),a("circle",{attrs:{cx:"26",cy:"6",r:"6",fill:"#FFBD2E",stroke:"#DEA123","stroke-width":".5"}}),a("circle",{attrs:{cx:"46",cy:"6",r:"6",fill:"#27C93F",stroke:"#1AAB29","stroke-width":".5"}})])])]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * 防止应用多开。bugfix:sholudQuit总是返回true，故暂时注释以下代码\n * 当进程是第一个实例时，返回false。\n * 如果是第二个实例时，返回true，并且执行第一个实例的回调函数\n */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" shouldQuit "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("makeSingleInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("commandLine"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" workingDir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mainWindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        mainWindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("isMinimized")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" mainWindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("restore")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        mainWindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("focus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("shouldQuit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("quit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")]),a("CodeResult",{attrs:{lang:"js",code:"%2F**%0A%20*%20%E9%98%B2%E6%AD%A2%E5%BA%94%E7%94%A8%E5%A4%9A%E5%BC%80%E3%80%82bugfix%3AsholudQuit%E6%80%BB%E6%98%AF%E8%BF%94%E5%9B%9Etrue%EF%BC%8C%E6%95%85%E6%9A%82%E6%97%B6%E6%B3%A8%E9%87%8A%E4%BB%A5%E4%B8%8B%E4%BB%A3%E7%A0%81%0A%20*%20%E5%BD%93%E8%BF%9B%E7%A8%8B%E6%98%AF%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%AE%9E%E4%BE%8B%E6%97%B6%EF%BC%8C%E8%BF%94%E5%9B%9Efalse%E3%80%82%0A%20*%20%E5%A6%82%E6%9E%9C%E6%98%AF%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%AE%9E%E4%BE%8B%E6%97%B6%EF%BC%8C%E8%BF%94%E5%9B%9Etrue%EF%BC%8C%E5%B9%B6%E4%B8%94%E6%89%A7%E8%A1%8C%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%AE%9E%E4%BE%8B%E7%9A%84%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%0A%20*%2F%0Aconst%20shouldQuit%20%3D%20app.makeSingleInstance((commandLine%2C%20workingDir)%20%3D%3E%20%7B%0A%20%20%20%20if%20(mainWindow)%20%7B%0A%20%20%20%20%20%20%20%20mainWindow.isMinimized()%20%26%26%20mainWindow.restore()%0A%20%20%20%20%20%20%20%20mainWindow.focus()%0A%20%20%20%20%7D%0A%7D)%0Aif%20(shouldQuit)%20%7B%0A%20%20%20%20app.quit()%0A%7D"}})],1),a("h2",{attrs:{id:"日志监听"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#日志监听"}},[s._v("#")]),s._v(" 日志监听")]),s._v(" "),a("p",[s._v("解决方案："),a("code",[s._v("electron-log")]),s._v(" + "),a("code",[s._v("CrashReporter")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("div",{staticClass:"custom-style-wrapper window-controls"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"54",height:"14",viewBox:"0 0 54 14"}},[a("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)"}},[a("circle",{attrs:{cx:"6",cy:"6",r:"6",fill:"#FF5F56",stroke:"#E0443E","stroke-width":".5"}}),a("circle",{attrs:{cx:"26",cy:"6",r:"6",fill:"#FFBD2E",stroke:"#DEA123","stroke-width":".5"}}),a("circle",{attrs:{cx:"46",cy:"6",r:"6",fill:"#27C93F",stroke:"#1AAB29","stroke-width":".5"}})])])]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'electron-log'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nlog"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("transports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("level "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info'")]),s._v("\nlog"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("transports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("format "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{h}:{i}:{s}:{ms} {text}'")]),s._v("\nlog"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("transports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("maxSize "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v("\nlog"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("transports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("level "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")]),a("CodeResult",{attrs:{lang:"js",code:"const%20log%20%3D%20require('electron-log')%0A%0Alog.transports.file.level%20%3D%20'info'%0Alog.transports.file.format%20%3D%20'%7Bh%7D%3A%7Bi%7D%3A%7Bs%7D%3A%7Bms%7D%20%7Btext%7D'%0Alog.transports.file.maxSize%20%3D%205%20*%201024%20*%201024%0Alog.transports.console.level%20%3D%20false"}})],1),a("h2",{attrs:{id:"vscode-的相关配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vscode-的相关配置"}},[s._v("#")]),s._v(" vscode 的相关配置")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("div",{staticClass:"custom-style-wrapper window-controls"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"54",height:"14",viewBox:"0 0 54 14"}},[a("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)"}},[a("circle",{attrs:{cx:"6",cy:"6",r:"6",fill:"#FF5F56",stroke:"#E0443E","stroke-width":".5"}}),a("circle",{attrs:{cx:"26",cy:"6",r:"6",fill:"#FFBD2E",stroke:"#DEA123","stroke-width":".5"}}),a("circle",{attrs:{cx:"46",cy:"6",r:"6",fill:"#27C93F",stroke:"#1AAB29","stroke-width":".5"}})])])]),a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.2.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"configurations"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"request"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"launch"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"启动程序"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"program"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${workspaceFolder}/main.js"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Debug Main Process"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"request"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"launch"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"cwd"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${workspaceFolder}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"runtimeExecutable"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${workspaceFolder}/node_modules/.bin/electron"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"windows"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"runtimeExecutable"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${workspaceFolder}/node_modules/.bin/electron.cmd"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"args"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")]),a("CodeResult",{attrs:{lang:"json",code:"%7B%0A%20%20%22version%22%3A%20%220.2.0%22%2C%0A%20%20%22configurations%22%3A%20%5B%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%22type%22%3A%20%22node%22%2C%0A%20%20%20%20%20%20%22request%22%3A%20%22launch%22%2C%0A%20%20%20%20%20%20%22name%22%3A%20%22%E5%90%AF%E5%8A%A8%E7%A8%8B%E5%BA%8F%22%2C%0A%20%20%20%20%20%20%22program%22%3A%20%22%24%7BworkspaceFolder%7D%2Fmain.js%22%0A%20%20%20%20%7D%2C%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%22name%22%3A%20%22Debug%20Main%20Process%22%2C%0A%20%20%20%20%20%20%20%20%22type%22%3A%20%22node%22%2C%0A%20%20%20%20%20%20%20%20%22request%22%3A%20%22launch%22%2C%0A%20%20%20%20%20%20%20%20%22cwd%22%3A%20%22%24%7BworkspaceFolder%7D%22%2C%0A%20%20%20%20%20%20%20%20%22runtimeExecutable%22%3A%20%22%24%7BworkspaceFolder%7D%2Fnode_modules%2F.bin%2Felectron%22%2C%0A%20%20%20%20%20%20%20%20%22windows%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%22runtimeExecutable%22%3A%20%22%24%7BworkspaceFolder%7D%2Fnode_modules%2F.bin%2Felectron.cmd%22%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22args%22%20%3A%20%5B%22.%22%5D%0A%20%20%20%20%20%20%7D%0A%20%20%5D%0A%7D"}})],1),a("h2",{attrs:{id:"更多参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更多参数"}},[s._v("#")]),s._v(" 更多参数")]),s._v(" "),a("p",[s._v("Predefined variables"),a("br"),s._v("\nThe following predefined variables are supported:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("div",{staticClass:"custom-style-wrapper window-controls"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"54",height:"14",viewBox:"0 0 54 14"}},[a("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)"}},[a("circle",{attrs:{cx:"6",cy:"6",r:"6",fill:"#FF5F56",stroke:"#E0443E","stroke-width":".5"}}),a("circle",{attrs:{cx:"26",cy:"6",r:"6",fill:"#FFBD2E",stroke:"#DEA123","stroke-width":".5"}}),a("circle",{attrs:{cx:"46",cy:"6",r:"6",fill:"#27C93F",stroke:"#1AAB29","stroke-width":".5"}})])])]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("${workspaceFolder} - the path of the folder opened in VS Code\n${workspaceFolderBasename} - the name of the folder opened in VS Code without any slashes (/)\n${file} - the current opened file\n${relativeFile} - the current opened file relative to workspaceFolder\n${fileBasename} - the current opened file's basename\n${fileBasenameNoExtension} - the current opened file's basename with no file extension\n${fileDirname} - the current opened file's dirname\n${fileExtname} - the current opened file's extension\n${cwd} - the task runner's current working directory on startup\n${lineNumber} - the current selected line number in the active file\n${selectedText} - the current selected text in the active file\n${execPath} - the path to the running VS Code executable\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")]),a("CodeResult",{attrs:{lang:"",code:"%24%7BworkspaceFolder%7D%20-%20the%20path%20of%20the%20folder%20opened%20in%20VS%20Code%0A%24%7BworkspaceFolderBasename%7D%20-%20the%20name%20of%20the%20folder%20opened%20in%20VS%20Code%20without%20any%20slashes%20(%2F)%0A%24%7Bfile%7D%20-%20the%20current%20opened%20file%0A%24%7BrelativeFile%7D%20-%20the%20current%20opened%20file%20relative%20to%20workspaceFolder%0A%24%7BfileBasename%7D%20-%20the%20current%20opened%20file's%20basename%0A%24%7BfileBasenameNoExtension%7D%20-%20the%20current%20opened%20file's%20basename%20with%20no%20file%20extension%0A%24%7BfileDirname%7D%20-%20the%20current%20opened%20file's%20dirname%0A%24%7BfileExtname%7D%20-%20the%20current%20opened%20file's%20extension%0A%24%7Bcwd%7D%20-%20the%20task%20runner's%20current%20working%20directory%20on%20startup%0A%24%7BlineNumber%7D%20-%20the%20current%20selected%20line%20number%20in%20the%20active%20file%0A%24%7BselectedText%7D%20-%20the%20current%20selected%20text%20in%20the%20active%20file%0A%24%7BexecPath%7D%20-%20the%20path%20to%20the%20running%20VS%20Code%20executable"}})],1),a("p",[a("a",{attrs:{href:"https://code.visualstudio.com/docs/editor/variables-reference",target:"_blank",rel:"noopener noreferrer"}},[s._v("相关链接"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=n.exports}}]);