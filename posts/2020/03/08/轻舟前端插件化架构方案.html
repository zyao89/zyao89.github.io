<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>轻舟前端插件化架构方案 | Zyao89&#39;s Blogs</title>
    <meta name="generator" content="VuePress 1.8.3">
    <link rel="icon" href="/favicon.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="description" content="神秘，暂无任何描述">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" data-auto-meta="true" data-update-meta="true">
    <meta rel="alternate" title="Zyao89&#39;s Blogs" href="https://zyao89.cn/rss.xml" link="alternate" content="rss" data-auto-meta="true" data-update-meta="true">
    <meta property="article:published_time" content="2020-03-08T10:51:12.000Z" data-auto-meta="true" data-update-meta="true">
    <meta property="article:modified_time" content="2023-11-27T11:25:12.666Z" data-auto-meta="true" data-update-meta="true">
    <meta property="og:site_name" content="Zyao89&#39;s Blogs" data-auto-meta="true" data-update-meta="true">
    <meta property="og:title" content="Zyao89&#39;s Blogs" data-auto-meta="true" data-update-meta="true">
    <meta property="og:description" content="神秘，暂无任何描述" data-auto-meta="true" data-update-meta="true">
    <meta property="og:type" content="article" data-auto-meta="true" data-update-meta="true">
    <meta property="og:url" content="https://zyao89.cn/s/76f85d50.html" data-auto-meta="true" data-update-meta="true">
    <meta name="twitter:title" content="Zyao89&#39;s Blogs" data-auto-meta="true" data-update-meta="true">
    <meta name="twitter:description" content="神秘，暂无任何描述" data-auto-meta="true" data-update-meta="true">
    <meta name="twitter:url" content="https://zyao89.cn/s/76f85d50.html" data-auto-meta="true" data-update-meta="true">
    <meta name="twitter:card" content="summary_large_image" data-auto-meta="true" data-update-meta="true">
    <meta name="twitter:label1" content="Written by" data-auto-meta="true" data-update-meta="true">
    <meta name="twitter:data2" content="轻舟" data-auto-meta="true" data-update-meta="true">
    <meta name="twitter:label2" content="Filed under" data-auto-meta="true" data-update-meta="true">
    <meta property="article:tag" content="轻舟" data-auto-meta="true" data-update-meta="true">
    <meta name="keywords" content="前端开发,轻舟" data-auto-meta="true" data-update-meta="true">
    <meta name="powerby" content="Micro-App" data-auto-meta="true" data-update-meta="true">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="google-site-verification" content="8sZJLe_q5uzLQR19aq4O6V5Y7YPj-mLjb7b-jlBloNo">
    <meta name="baidu-site-verification" content="D4YhVrZwXf">
    
    <link rel="preload" href="/assets/css/0.styles.bd01dee5.css" as="style"><link rel="preload" href="/assets/js/app.6169d5d9.js" as="script"><link rel="preload" href="/assets/js/1.381a88b1.js" as="script"><link rel="preload" href="/assets/js/17.7be3556f.js" as="script"><link rel="preload" href="/assets/js/29.010b6565.js" as="script"><link rel="preload" href="/assets/js/23.b5979579.js" as="script"><link rel="preload" href="/assets/js/25.78ef3fa2.js" as="script"><link rel="prefetch" href="/assets/js/10.6ae44f0d.js"><link rel="prefetch" href="/assets/js/100.ce30b411.js"><link rel="prefetch" href="/assets/js/101.430c2297.js"><link rel="prefetch" href="/assets/js/102.c8909a76.js"><link rel="prefetch" href="/assets/js/103.b9dba89c.js"><link rel="prefetch" href="/assets/js/104.27de0e8c.js"><link rel="prefetch" href="/assets/js/105.b8801b53.js"><link rel="prefetch" href="/assets/js/106.a416b83f.js"><link rel="prefetch" href="/assets/js/107.15d0221f.js"><link rel="prefetch" href="/assets/js/108.ee17e077.js"><link rel="prefetch" href="/assets/js/109.9b8800f9.js"><link rel="prefetch" href="/assets/js/11.54ed8a83.js"><link rel="prefetch" href="/assets/js/110.cb8e98f3.js"><link rel="prefetch" href="/assets/js/111.2ddcd088.js"><link rel="prefetch" href="/assets/js/112.4b546485.js"><link rel="prefetch" href="/assets/js/113.c36d1452.js"><link rel="prefetch" href="/assets/js/114.dae28062.js"><link rel="prefetch" href="/assets/js/115.0ca7de2b.js"><link rel="prefetch" href="/assets/js/116.8dab3bf5.js"><link rel="prefetch" href="/assets/js/117.f4f6c6f1.js"><link rel="prefetch" href="/assets/js/118.86cbf460.js"><link rel="prefetch" href="/assets/js/119.adde92b6.js"><link rel="prefetch" href="/assets/js/12.04cb229a.js"><link rel="prefetch" href="/assets/js/120.73bf71ee.js"><link rel="prefetch" href="/assets/js/121.0f189cac.js"><link rel="prefetch" href="/assets/js/122.5c45dc1c.js"><link rel="prefetch" href="/assets/js/13.5a00df16.js"><link rel="prefetch" href="/assets/js/14.a26fae10.js"><link rel="prefetch" href="/assets/js/15.e9537b9f.js"><link rel="prefetch" href="/assets/js/16.06683abd.js"><link rel="prefetch" href="/assets/js/18.ec51fb25.js"><link rel="prefetch" href="/assets/js/19.488ea1ee.js"><link rel="prefetch" href="/assets/js/20.29ddea1c.js"><link rel="prefetch" href="/assets/js/21.9109ebb0.js"><link rel="prefetch" href="/assets/js/22.9133d4c6.js"><link rel="prefetch" href="/assets/js/24.a6ef82b5.js"><link rel="prefetch" href="/assets/js/26.1219245c.js"><link rel="prefetch" href="/assets/js/27.fe2ae86a.js"><link rel="prefetch" href="/assets/js/28.bec255d5.js"><link rel="prefetch" href="/assets/js/30.97f83566.js"><link rel="prefetch" href="/assets/js/31.6119500d.js"><link rel="prefetch" href="/assets/js/32.46261414.js"><link rel="prefetch" href="/assets/js/33.0d04d42c.js"><link rel="prefetch" href="/assets/js/34.c6f32b75.js"><link rel="prefetch" href="/assets/js/35.0ee096ff.js"><link rel="prefetch" href="/assets/js/36.8f745991.js"><link rel="prefetch" href="/assets/js/37.dfe9efd3.js"><link rel="prefetch" href="/assets/js/38.bec066ef.js"><link rel="prefetch" href="/assets/js/39.b14031d8.js"><link rel="prefetch" href="/assets/js/40.800552a7.js"><link rel="prefetch" href="/assets/js/41.e57d40b9.js"><link rel="prefetch" href="/assets/js/42.7f256ae5.js"><link rel="prefetch" href="/assets/js/43.5a80c8e2.js"><link rel="prefetch" href="/assets/js/44.52e26885.js"><link rel="prefetch" href="/assets/js/45.a42e8e25.js"><link rel="prefetch" href="/assets/js/46.6764b81d.js"><link rel="prefetch" href="/assets/js/47.eaf53807.js"><link rel="prefetch" href="/assets/js/48.14338a4d.js"><link rel="prefetch" href="/assets/js/49.526d110c.js"><link rel="prefetch" href="/assets/js/50.b33cc987.js"><link rel="prefetch" href="/assets/js/51.bbcc75ed.js"><link rel="prefetch" href="/assets/js/52.394ca397.js"><link rel="prefetch" href="/assets/js/53.27695e37.js"><link rel="prefetch" href="/assets/js/54.5ad339f1.js"><link rel="prefetch" href="/assets/js/55.7c915336.js"><link rel="prefetch" href="/assets/js/56.e01cebf5.js"><link rel="prefetch" href="/assets/js/57.1d7fecfe.js"><link rel="prefetch" href="/assets/js/58.ffd7b1b3.js"><link rel="prefetch" href="/assets/js/59.f8db9595.js"><link rel="prefetch" href="/assets/js/60.a5f1c4aa.js"><link rel="prefetch" href="/assets/js/61.b7803c9d.js"><link rel="prefetch" href="/assets/js/62.2ba48c7c.js"><link rel="prefetch" href="/assets/js/63.a865f1ec.js"><link rel="prefetch" href="/assets/js/64.7aa3fc9c.js"><link rel="prefetch" href="/assets/js/65.52d5335b.js"><link rel="prefetch" href="/assets/js/66.cea5fc3f.js"><link rel="prefetch" href="/assets/js/67.2d0f72dc.js"><link rel="prefetch" href="/assets/js/68.777bd562.js"><link rel="prefetch" href="/assets/js/69.71c5f7ec.js"><link rel="prefetch" href="/assets/js/7.4cf3e922.js"><link rel="prefetch" href="/assets/js/70.1f4316df.js"><link rel="prefetch" href="/assets/js/71.997b8615.js"><link rel="prefetch" href="/assets/js/72.9b8dcbc7.js"><link rel="prefetch" href="/assets/js/73.1b58fd72.js"><link rel="prefetch" href="/assets/js/74.32aa822b.js"><link rel="prefetch" href="/assets/js/75.6bb7df3b.js"><link rel="prefetch" href="/assets/js/76.520f2311.js"><link rel="prefetch" href="/assets/js/77.740ea264.js"><link rel="prefetch" href="/assets/js/78.0c97a8a8.js"><link rel="prefetch" href="/assets/js/79.557ccb7a.js"><link rel="prefetch" href="/assets/js/8.56f0b2e1.js"><link rel="prefetch" href="/assets/js/80.1aa8feae.js"><link rel="prefetch" href="/assets/js/81.8f9a55ed.js"><link rel="prefetch" href="/assets/js/82.6cdf60b1.js"><link rel="prefetch" href="/assets/js/83.29956407.js"><link rel="prefetch" href="/assets/js/84.e92374a3.js"><link rel="prefetch" href="/assets/js/85.6421d767.js"><link rel="prefetch" href="/assets/js/86.4f19d0eb.js"><link rel="prefetch" href="/assets/js/87.3e568c7e.js"><link rel="prefetch" href="/assets/js/88.163feac5.js"><link rel="prefetch" href="/assets/js/89.a4ab5d2b.js"><link rel="prefetch" href="/assets/js/9.b2dc3a8e.js"><link rel="prefetch" href="/assets/js/90.ec038868.js"><link rel="prefetch" href="/assets/js/91.d2368531.js"><link rel="prefetch" href="/assets/js/92.7054f0b3.js"><link rel="prefetch" href="/assets/js/93.029176c6.js"><link rel="prefetch" href="/assets/js/94.0d33f8b6.js"><link rel="prefetch" href="/assets/js/95.8b96ae84.js"><link rel="prefetch" href="/assets/js/96.7bb3a166.js"><link rel="prefetch" href="/assets/js/97.10a3a72c.js"><link rel="prefetch" href="/assets/js/98.4cb6e2ae.js"><link rel="prefetch" href="/assets/js/99.01121ed2.js"><link rel="prefetch" href="/assets/js/icon-svg.c49b1031.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.b053b093.js"><link rel="prefetch" href="/assets/js/vendors~icon-svg.6232fe9b.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.5e89e0f4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bd01dee5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="navbar-inner"><div class="navbar-crumb"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Zyao89's Blogs</span></a></div> <div class="navbar-action"><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link link_1A4KpgHx"><svg version="1.1" width="14" height="14" viewBox="0 0 0 0" class="icon svgIcon_1AbM17xJ"><use xlink:href=""></use></svg> 首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><svg version="1.1" width="14" height="14" viewBox="0 0 0 0" class="icon svgIcon_1AbM17xJ"><use xlink:href=""></use></svg> <span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/%E7%A7%BB%E5%8A%A8%E5%BC%80%E5%8F%91/" class="nav-link link_1A4KpgHx"><!----> 移动开发</a></li><li class="dropdown-item"><!----> <a href="/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF/" class="nav-link link_1A4KpgHx"><!----> 服务端</a></li><li class="dropdown-item"><!----> <a href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" class="nav-link link_1A4KpgHx"><!----> 前端开发</a></li><li class="dropdown-item"><!----> <a href="/categories/%E5%85%B6%E5%AE%83/" class="nav-link link_1A4KpgHx"><!----> 其它</a></li><li class="dropdown-item"><!----> <a href="/categories/%E7%AE%97%E6%B3%95/" class="nav-link link_1A4KpgHx"><!----> 算法</a></li><li class="dropdown-item"><!----> <a href="/categories/%E7%BD%91%E7%BB%9C/" class="nav-link link_1A4KpgHx"><!----> 网络</a></li></ul></div></div><div class="nav-item"><a href="/tags/" class="nav-link link_1A4KpgHx"><svg version="1.1" width="14" height="14" viewBox="0 0 0 0" class="icon svgIcon_1AbM17xJ"><use xlink:href=""></use></svg> 标签</a></div><div class="nav-item"><a href="/timeline/" class="nav-link link_1A4KpgHx"><svg version="1.1" width="14" height="14" viewBox="0 0 0 0" class="icon svgIcon_1AbM17xJ"><use xlink:href=""></use></svg> 归档</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><svg version="1.1" width="14" height="14" viewBox="0 0 0 0" class="icon svgIcon_1AbM17xJ"><use xlink:href=""></use></svg> <span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://zyao89.cn/rss.xml" target="_blank" rel="noopener noreferrer" class="nav-link external link_1A4KpgHx"><svg version="1.1" width="14" height="14" viewBox="0 0 0 0" class="icon svgIcon_1AbM17xJ"><use xlink:href=""></use></svg> RSS <svg version="1.1" width="12" height="12" viewBox="0 0 0 0" class="svgIcon_1AbM17xJ outbound_2CshRVUf"><use xlink:href=""></use></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/zyao89" target="_blank" rel="noopener noreferrer" class="nav-link external link_1A4KpgHx"><svg version="1.1" width="14" height="14" viewBox="0 0 0 0" class="icon svgIcon_1AbM17xJ"><use xlink:href=""></use></svg> GitHub <svg version="1.1" width="12" height="12" viewBox="0 0 0 0" class="svgIcon_1AbM17xJ outbound_2CshRVUf"><use xlink:href=""></use></svg></a></li><li class="dropdown-item"><!----> <a href="mailto:zyao89@gmail.com?subject=[Blogs]关于博客的建议&amp;body=邮件正文, 请认真填写!" class="nav-link external link_1A4KpgHx"><svg version="1.1" width="14" height="14" viewBox="0 0 0 0" class="icon svgIcon_1AbM17xJ"><use xlink:href=""></use></svg> Email <!----></a></li></ul></div></div> <!----></nav></div></div></div></header> <!----> <div class="main-wrapper wrapper_2N9oDuL6"><div class="sidebar-mask"></div> <div class="aside"><aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link link_1A4KpgHx"><svg version="1.1" width="14" height="14" viewBox="0 0 0 0" class="icon svgIcon_1AbM17xJ"><use xlink:href=""></use></svg> 首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><svg version="1.1" width="14" height="14" viewBox="0 0 0 0" class="icon svgIcon_1AbM17xJ"><use xlink:href=""></use></svg> <span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/%E7%A7%BB%E5%8A%A8%E5%BC%80%E5%8F%91/" class="nav-link link_1A4KpgHx"><!----> 移动开发</a></li><li class="dropdown-item"><!----> <a href="/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF/" class="nav-link link_1A4KpgHx"><!----> 服务端</a></li><li class="dropdown-item"><!----> <a href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" class="nav-link link_1A4KpgHx"><!----> 前端开发</a></li><li class="dropdown-item"><!----> <a href="/categories/%E5%85%B6%E5%AE%83/" class="nav-link link_1A4KpgHx"><!----> 其它</a></li><li class="dropdown-item"><!----> <a href="/categories/%E7%AE%97%E6%B3%95/" class="nav-link link_1A4KpgHx"><!----> 算法</a></li><li class="dropdown-item"><!----> <a href="/categories/%E7%BD%91%E7%BB%9C/" class="nav-link link_1A4KpgHx"><!----> 网络</a></li></ul></div></div><div class="nav-item"><a href="/tags/" class="nav-link link_1A4KpgHx"><svg version="1.1" width="14" height="14" viewBox="0 0 0 0" class="icon svgIcon_1AbM17xJ"><use xlink:href=""></use></svg> 标签</a></div><div class="nav-item"><a href="/timeline/" class="nav-link link_1A4KpgHx"><svg version="1.1" width="14" height="14" viewBox="0 0 0 0" class="icon svgIcon_1AbM17xJ"><use xlink:href=""></use></svg> 归档</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><svg version="1.1" width="14" height="14" viewBox="0 0 0 0" class="icon svgIcon_1AbM17xJ"><use xlink:href=""></use></svg> <span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://zyao89.cn/rss.xml" target="_blank" rel="noopener noreferrer" class="nav-link external link_1A4KpgHx"><svg version="1.1" width="14" height="14" viewBox="0 0 0 0" class="icon svgIcon_1AbM17xJ"><use xlink:href=""></use></svg> RSS <svg version="1.1" width="12" height="12" viewBox="0 0 0 0" class="svgIcon_1AbM17xJ outbound_2CshRVUf"><use xlink:href=""></use></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/zyao89" target="_blank" rel="noopener noreferrer" class="nav-link external link_1A4KpgHx"><svg version="1.1" width="14" height="14" viewBox="0 0 0 0" class="icon svgIcon_1AbM17xJ"><use xlink:href=""></use></svg> GitHub <svg version="1.1" width="12" height="12" viewBox="0 0 0 0" class="svgIcon_1AbM17xJ outbound_2CshRVUf"><use xlink:href=""></use></svg></a></li><li class="dropdown-item"><!----> <a href="mailto:zyao89@gmail.com?subject=[Blogs]关于博客的建议&amp;body=邮件正文, 请认真填写!" class="nav-link external link_1A4KpgHx"><svg version="1.1" width="14" height="14" viewBox="0 0 0 0" class="icon svgIcon_1AbM17xJ"><use xlink:href=""></use></svg> Email <!----></a></li></ul></div></div> <!----></nav> <div class="sidebar-links root_2Q8rAuh1"><div class="sidebar-group"><p class="sidebar-heading"><span>相关推荐</span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/posts/2021/02/23/轻舟-license-设计.html" class="nav-link sidebar-link link_1A4KpgHx"><!----> 商业化 License 设计记录</a></li><li><a href="/posts/2020/12/07/轻舟前端模块化异步加载演进之路.html" class="nav-link sidebar-link link_1A4KpgHx"><!----> 轻舟前端模块化异步加载演进之路--类微前端</a></li><li><a href="/posts/2021/07/08/monorepo-vs-multirepo.html" class="nav-link sidebar-link link_1A4KpgHx"><!----> monorepo vs multirepo</a></li><li><a href="/posts/2020/03/30/es6之箭头函数中的this.html" class="nav-link sidebar-link link_1A4KpgHx"><!----> ES6之箭头函数中的this</a></li><li><a href="/posts/2020/03/26/vue-cli-service中的proxy的适配及一些问题总结.html" class="nav-link sidebar-link link_1A4KpgHx"><!----> vue-cli-service中的proxy的适配及一些问题总结</a></li></ul></div></div>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>轻舟前端插件化架构方案</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/posts/2020/03/08/%E8%BD%BB%E8%88%9F%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96%E6%9E%B6%E6%9E%84%E6%96%B9%E6%A1%88.html#背景" class="sidebar-link">背景</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/posts/2020/03/08/%E8%BD%BB%E8%88%9F%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96%E6%9E%B6%E6%9E%84%E6%96%B9%E6%A1%88.html#分析" class="sidebar-link">分析</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/posts/2020/03/08/%E8%BD%BB%E8%88%9F%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96%E6%9E%B6%E6%9E%84%E6%96%B9%E6%A1%88.html#方案选择" class="sidebar-link">方案选择</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/posts/2020/03/08/%E8%BD%BB%E8%88%9F%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96%E6%9E%B6%E6%9E%84%E6%96%B9%E6%A1%88.html#方案落地" class="sidebar-link">方案落地</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/posts/2020/03/08/%E8%BD%BB%E8%88%9F%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96%E6%9E%B6%E6%9E%84%E6%96%B9%E6%A1%88.html#举例" class="sidebar-link">举例</a></li></ul></li><li><a href="/posts/2020/03/08/%E8%BD%BB%E8%88%9F%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96%E6%9E%B6%E6%9E%84%E6%96%B9%E6%A1%88.html#总结" class="sidebar-link">总结</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/posts/2020/03/08/%E8%BD%BB%E8%88%9F%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96%E6%9E%B6%E6%9E%84%E6%96%B9%E6%A1%88.html#优点" class="sidebar-link">优点</a></li><li class="sidebar-sub-header"><a href="/posts/2020/03/08/%E8%BD%BB%E8%88%9F%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96%E6%9E%B6%E6%9E%84%E6%96%B9%E6%A1%88.html#不足" class="sidebar-link">不足</a></li></ul></li></ul></section></li></ul> </aside></div> <!----> <div class="main-content content_2RZ9sgU8"><main class="page root_2M_Qi7kG"> <div class="theme-default-content root_2-7WkaDt"><h1 class="title_1j35tYhd">
        轻舟前端插件化架构方案
        <!----></h1> <div class="rows_1p4yuwM6"><span class="categories_xVucymjQ"><span class="categoriesItem_25QzbJMw">前端开发</span></span> <span class="tags_3eRugDkG"><span class="tagItem_BVRgjoUO">轻舟</span></span></div> <div class="rows_1p4yuwM6"><span class="author_26qEzl24"><svg version="1.1" width="14" height="14" viewBox="0 0 0 0" class="svgIcon_1AbM17xJ icon_2cqqjx-o"><use xlink:href=""></use></svg> <span>Zyao89</span></span> <span><svg version="1.1" width="14" height="14" viewBox="0 0 0 0" class="svgIcon_1AbM17xJ icon_2cqqjx-o"><use xlink:href=""></use></svg> <span>2020年3月8日星期日 10:51</span></span></div></div> <div role="content" class="theme-default-content content__default content_1Lffc1Nr"><p>用过构建工具的同学都知道，grunt, webpack, gulp 都支持插件开发。后端框架比如 egg koa 都支持插件机制拓展，前端页面也有许多可拓展性的要求。插件化无处不在，所有的框架都希望自身拥有最强大的可拓展能力，可维护性，而且都选择了插件化的方式达到目标。</p> <h2 id="背景"><a href="#背景" class="header-anchor">#</a> 背景</h2> <p>用过构建工具的同学都知道，grunt, webpack, gulp 都支持插件开发。后端框架比如 egg koa 都支持插件机制拓展，前端页面也有许多可拓展性的要求。插件化无处不在，所有的框架都希望自身拥有最强大的可拓展能力，可维护性，而且都选择了插件化的方式达到目标。</p> <p>我认为插件化思维是一种通过拆分来达到工程拆分治理的方案，可以解决工程膨胀、开发维护困难等问题。</p> <p>没有插件化，核心库的代码会变得冗余，功能耦合越来越严重，最后导致维护困难。</p> <p>轻舟前端项目原始工程目录如下；</p> <div class="language- line-numbers-mode"><div class="custom-style-wrapper window-controls"><svg xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14"><g fill="none" fill-rule="evenodd" transform="translate(1 1)"><circle cx="6" cy="6" r="6" fill="#FF5F56" stroke="#E0443E" stroke-width=".5"></circle><circle cx="26" cy="6" r="6" fill="#FFBD2E" stroke="#DEA123" stroke-width=".5"></circle><circle cx="46" cy="6" r="6" fill="#27C93F" stroke="#1AAB29" stroke-width=".5"></circle></g></svg></div><pre class="language-text"><code>- src
   |- client
   |    |- base # 通用
   |    |- components # 公共组件
   |    |- utils # 通用工具
   |    |- views # 各个子业务模块
   |        ｜- apm
   |        ｜- cicd
   |        ｜- gtxs
   |        ｜- login
   |        ｜- ncs
   |        ｜- nsf
   |        ｜- platform
   |- server # nodejs 服务相关
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div><div class="root_1HZXd69d"><div class="head_2UeprHVY"><div class="tools_1YHFaVS4"><!----> <span data-clipboard-text="- src
   |- client
   |    |- base # 通用
   |    |- components # 公共组件
   |    |- utils # 通用工具
   |    |- views # 各个子业务模块
   |        ｜- apm
   |        ｜- cicd
   |        ｜- gtxs
   |        ｜- login
   |        ｜- ncs
   |        ｜- nsf
   |        ｜- platform
   |- server # nodejs 服务相关" class="icon_4QTKitRM"><svg version="1.1" width="14" height="14" viewBox="0 0 0 0" class="svgIcon_1AbM17xJ"><use xlink:href=""></use></svg></span> <!----></div></div> <!----></div></div><p>虽然结构清晰，但是所有的子业务模块都用堆积在一个项目仓库中，面临着版本维护成本高，且多人开发时的代码各模块耦合严重，合并代码时冲突情况的发生也会愈发频繁等很多问题。</p> <h2 id="分析"><a href="#分析" class="header-anchor">#</a> 分析</h2> <p>诚然，任何技术的实现都要依托业务场景才会变得有意义，所以在阐述轻舟前端团队的插件化实践之前，我们先来简单展示一下轻舟前端各个子业务的基本形态。</p> <p><img src="/assets/img/2021-02-25-10-52-18.45527d19.png" alt=""></p> <p>从图中我们很容易发现各个子业务都是相互独立的，而平台则是为了横向服务于各个子业务，提供各个子业务入口等公共而诞生的。</p> <p>而且随着业务产品线的不断扩张，工程管理成本也在迅速增长。具体来说，包括如下五个方面：</p> <ul><li>新业务线产品急速增加，同时为了保证快速接入且复用率的最大化，把文件放入同一仓库管理，导致文件数量增长极快，管理及协同开发难度也在不断加大。</li> <li>文件越来越多，文件结构越不受控制，业务开发寻址变得越来越困难。</li> <li>文件越来越多，开发、构建、部署速度变得越来越慢，开发体验在持续下降。</li> <li>不同业务线间没有物理隔离，出现了跨业务线互相引用混乱，例如 A 业务线出现了 B 业务线名字的组件。</li> <li>不同客户所需要的功能不同，子业务的版本也会不同，一个仓库无法管理多个子业务的不同版本组合。</li></ul> <h2 id="方案选择"><a href="#方案选择" class="header-anchor">#</a> 方案选择</h2> <p>为了要解决这些问题，我们意识到需要拆分这些子业务，即进行工程优化的常规手段进行“分治”。</p> <p>那么要怎么拆呢？我们考虑了很多方案，其中也包括现阶段业界流行的微前端方案。也从这个概念出发，我们也深度结合了轻舟前端的实际业务的开发情况，对现有工程进行了调研。</p> <p>为什么不采用微前端方案？这个问题我们考虑很久，其中很大一部分原因是“中心化”的依赖。由于轻舟的大部分客户都是私有网络，定制化需求大，且轻舟前端应用属于中后台管理系统，出于安全问题，很大程度上不便于提供一个公共的存储服务作为版本控制中心。</p> <p>其次就是整改周期中要不影响现有业务工程，做到平滑迁移，对现有工程中的代码基本做到不修改等。最主要的是要考虑兼容原有的客户代码（这点很难）。</p> <p>最终我们另辟蹊径，采用了一种<code>插件化</code>的方案，“一切模块业务皆是插件”。</p> <h2 id="方案落地"><a href="#方案落地" class="header-anchor">#</a> 方案落地</h2> <p>插件化就是将不断扩张的功能分散在插件中，内部集中维护逻辑，这就有点像数据库横向扩容，结构不变，拆分数据。</p> <p>理想情况下，我们都希望一个库，或者一个框架具有足够的可拓展性。这个可拓展性体现在这三个方面：</p> <ul><li>支持产品形态业务等自由组合转换，针对不同客户需求提供不同时期的业务版本组合，以实现功能。</li> <li>支持二次开发，满足不同业务场景的特定需求。</li> <li>让代码以业务功能为纬度聚合起来，而不是某个片面的逻辑结构，在代码数量庞大的场景尤为重要。</li></ul> <p>我们最终的方案依赖于 NPM 中的 git 依赖的功能机制。</p> <p>所有业务都是独立的 git 仓库子工程，可以独立打包，也可以由一个统一的容器工程管理，打包时集成。</p> <p>大致的方案图如下：</p> <p><img src="/assets/img/2021-02-25-10-52-58.e01560d8.png" alt=""></p> <ul><li>公共层：属于通用公共逻辑，存放整个平台通用的组件及后端业务逻辑。</li> <li>业务层：针对不同业务拆分成不同等价的业务仓库，各个业务向上依赖，每个业务都可以当做独立插件。</li> <li>统一容器：可选，不包含实际的业务逻辑，可以对所有业务层进行组合，并对外输出一个完整的项目产品。</li></ul> <p>其中每一个块都是相互独立的仓库和业务，且都可以独立运行。通过 “git分支” 与 “npm依赖管理” 相结合, 使业务模块之间成为依赖库，相互解耦, 利于开发.</p> <p>现在来试着解决最初的五个问题：</p> <ol><li>通过拆分仓库，使各个业务文件分散管理，并且提取了公共的common仓库，作为业务统一依赖。</li> <li>通过拆分仓库，减少各个仓库中具体业务的代码量，开发时只需要关注自身业务和通用组件等部分。</li> <li>通过拆分仓库，减少开发时的构建成本，减少开发文件依赖，使构建速度提升。</li> <li>通过拆分仓库，不同业务线建立物理隔离。</li> <li>通过各个子业务独立分支的方式，做到不同客户子业务级别的功能版本不同的自由组合。</li></ol> <h3 id="举例"><a href="#举例" class="header-anchor">#</a> 举例</h3> <p>通过拆分，现在我们可以把<code>common</code>、<code>server</code>、<code>NSF</code>、<code>网关</code>、<code>平台</code>等多个业务模块当成独立的插件。<br>
以下会简单的通过两个例子描述下具体的使用场景。</p> <h4 id="业务组合"><a href="#业务组合" class="header-anchor">#</a> 业务组合</h4> <p>我们可以通过<code>统一容器</code>增加不同的业务依赖，也就是在<code>统一容器</code>中，增加各个业务插件，让这个容器拥有相应的业务功能。如：在配置文件中增加了<code>login</code>登录业务，此时容器就会拥有一个登陆界面，同时后端node层也会拥有登录鉴权的相关逻辑。</p> <h4 id="新增子业务"><a href="#新增子业务" class="header-anchor">#</a> 新增子业务</h4> <p>当我们新增一个子业务时（如：cicd 业务），我们只需要创建一个 cicd 的新仓库，并且该仓库结构依然完全按照独立项目开发。只需要依赖公共层的<code>common</code>和<code>server</code>，并且在根目录增加一个基本配置文件<code>config.js</code>，就可以完全接入了。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>由于轻舟前端方案采用的是插件化的架构，所以组件库升级、优化打包方案等一系列工程都可以在插件方式下完成，而无需改变源码本身。</p> <p>配置插件化，可参考 <code>vue-cli</code> 插件原理。</p> <h3 id="优点"><a href="#优点" class="header-anchor">#</a> 优点</h3> <ol><li>分支合并时的冲突可控 (不再采取分支合并进行最终输出).</li> <li>业务模块之间相互解耦, 降低业务之间强耦合度.</li> <li>代码结构规范化 (分治思想, 业务独立维护).</li> <li>提高代码复用性 (通过规范化, 明确了可暴露的模块).</li> <li>业务中, 优化了多个模块自由组合需求. (通过不同的分支引用, 进行自由组合)</li></ol> <h3 id="不足"><a href="#不足" class="header-anchor">#</a> 不足</h3> <ol><li>线上部署更新都是以全量的前端资源进行打包，耗时较长。(可进行优化成单个业务独立打包)</li> <li>由于插件化的机制，导致<code>webpack</code>配置等存在部分黑盒情况，不方便维护。(以通过打印输出最终配置)</li></ol></div> <div class="root_1qgPDpgW"><div><span>作者：</span> <span>Zyao89；</span> <span>转载请保留</span></div> <div><span>版权声明：</span> <span>自由转载-非商用-非衍生-保持署名</span></div> <div><span>原文地址：</span> <a target="_blank" href="https://zyao89.cn/s/76f85d50.html">https://zyao89.cn/s/76f85d50.html</a></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次编辑时间:</span> <span class="time">2023年11月27日星期一 11:18</span></div></footer> <!---->  <div type="vssue" class="theme-default-content root_2fUnO8Ia"><!----></div></main></div></div> <!----></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.6169d5d9.js" defer></script><script src="/assets/js/1.381a88b1.js" defer></script><script src="/assets/js/17.7be3556f.js" defer></script><script src="/assets/js/29.010b6565.js" defer></script><script src="/assets/js/23.b5979579.js" defer></script><script src="/assets/js/25.78ef3fa2.js" defer></script>
  </body>
</html>
